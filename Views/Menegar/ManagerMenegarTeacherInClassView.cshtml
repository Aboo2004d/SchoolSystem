@{
    ViewData["Title"] = "Ø§Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ù„Ù„ØµÙ";
}
<!-- ØªØ¶Ù…ÙŠÙ† Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />

<br><br><br>
<h1>Ø§Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙÙŠ Ø§Ù„ØµÙ: @ViewBag.name</h1>

<p>
    <a class="btn btn-outline-success" asp-controller="TheClass" asp-action="CreateTeacherClass" asp-route-idClass="@ViewBag.IdClas">
        <i class="bi bi-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù… Ù„Ù„ØµÙ
    </a>
    <a class="btn btn-outline-dark" asp-controller="Menegar" asp-action="ManagerMenegarClassView">
        <i class="bi bi-arrow-left-circle"></i> Ø¹ÙˆØ¯Ø©
    </a>
</p>

<hr>

<table id="studentsTable" class="display" style="width:100%">
    <thead>
        <tr>
            <th>Ø§Ù„Ù…Ø¹Ù„Ù…</th>
            <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
            <th>Ø§Ù„ØµÙ</th>
            <th>Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª</th>
        </tr>
    </thead>
</table>

<form asp-controller="StudentClass" asp-action="Delete" id="DeleteTeacherClass">
    <input type="hidden" name="id" id="teacherclassid" />
</form>

@section Scripts {
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js" defer></script>
    <script>
        var idClass = @Html.Raw(ViewBag.IdClass);

        $(document).ready(function () {
            $('#studentsTable').DataTable({
                "deferRender": true,
                "processing": true,
                "serverSide": true,
                "ajax": {
                    "url": "/Menegar/ManagerMenegarTeacherInClass?idClass=" + idClass,
                    "type": "GET",
                    "dataSrc": function (json) {
                        if (json.error) {
                            alert(json.error);
                            window.location.href = "/Account/Login";
                            return [];
                        }
                        return json.data;
                    }
                },
                "columns": [
                    { "data": "teacherName" },
                    { "data": "lectuerName" },
                    { "data": "classroomName" },
                    {
                        "data": null,
                        "render": function (data, type, row) {
                            return `
                                <button type="button" class="btn btn-outline-danger delete" data-id="${row.id}">
                                    <i class="bi bi-trash"></i> Ø¥Ø²Ø§Ù„Ø©
                                </button>`;
                        }
                    }
                ],
                "language": {
                    "search": "ğŸ”Ø¨Ø­Ø«: ",
                    "lengthMenu": "Ø¹Ø±Ø¶ _MENU_ Ø³Ø¬Ù„",
                    "info": "Ø¹Ø±Ø¶ Ù…Ù†  _START_ Ø§Ù„Ù‰ _END_ Ù…Ù† Ø§ØµÙ„ _TOTAL_ Ø³Ø¬Ù„",
                    "paginate": {
                        "next": "Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©",
                        "previous": "Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"
                    },
                    "zeroRecords": "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ø¬Ù„Ø§Øª"
                }
            });
        });
    </script>

    <script>
        $(function () {
            $(document).on('click', '.delete', function (e) {
                e.preventDefault();
                var btn = $(this);
                var id = btn.data('id');

                Swal.fire({
                    title: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ",
                    text: "Ù„Ù† ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#3085d6",
                    cancelButtonColor: "#d33",
                    confirmButtonText: "Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°ÙÙ‡!"
                }).then((result) => {
                    if (result.isConfirmed) {
                        $('#teacherclassid').val(id);
                        $('#DeleteTeacherClass').submit();

                        Swal.fire({
                            title: "ØªÙ… Ø§Ù„Ø­Ø°Ù!",
                            text: "ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ù„Ù….",
                            icon: "success"
                        });
                    }
                });
            });
        });
    </script>
    <style>
        /* ØªÙ†Ø³ÙŠÙ‚ Ø±Ø£Ø³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        #studentsTable thead th {
            background-color: #f8f9fa;
            font-weight: bold;
            text-align: right;
            padding: 12px 15px;
        }
    </style>
}
